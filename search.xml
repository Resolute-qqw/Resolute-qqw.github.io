<?xml version="1.0" encoding="utf-8"?>
<search> 
  
    
    <entry>
      <title>常问的PHP面试题</title>
      <link href="/2018/12/19/php-mian-shi-ti/"/>
      <url>/2018/12/19/php-mian-shi-ti/</url>
      
        <content type="html"><![CDATA[<h1 id="PHP经典-面试题"><a href="#PHP经典-面试题" class="headerlink" title="PHP经典 面试题"></a>PHP经典 面试题</h1><h2 id="谈谈对面向对象的理解"><a href="#谈谈对面向对象的理解" class="headerlink" title="谈谈对面向对象的理解"></a>谈谈对面向对象的理解</h2><p>面向对象简称OOP，对象就是人对各种具体事物抽象之后的概念。人们每天都在跟各种对象打交道，就比如:</p><p>一台电脑而对象有很多特性：内存，宽度，颜色…这些就是属性，<br>而对象还有很多功能：听歌，看视频，打电话…这些就是方法，可以看成是一个函数<br>但是对象不是独立的，还有继承性。在编程的过程中，我们可以把所有问题都看成是一个对象，<br>但对象实际上就是一组数据的集合，并且都已经被命名，这些数据的根据就是对象的属性，可以被访问。<br>但是如果要访问一个外部的对象我们就必须要先将它引进来。</p><h2 id="http协议状态码"><a href="#http协议状态码" class="headerlink" title="http协议状态码"></a>http协议状态码</h2><ul><li>100-199 用于指定客户端相应的某些动作。</li><li>200-299 用于表示请求成功。</li><li>300-399 用于已经移动的文件并且常被包含在定位头信息中指定新的地址信息。</li><li>400-499 用于指出客户端的错误。</li><li>500-599 用于指出服务器错误。</li></ul><h2 id="谈谈你对-PHP-命名空间的理解"><a href="#谈谈你对-PHP-命名空间的理解" class="headerlink" title="谈谈你对 PHP 命名空间的理解"></a>谈谈你对 PHP 命名空间的理解</h2><p>命名空间是一种封装事物的抽象方法，定义的空间是虚拟的，不是真实存在的。主要是用来解决类、函数、常量名字的冲突问题。</p><h2 id="请谈谈您对-MVC-的理解？"><a href="#请谈谈您对-MVC-的理解？" class="headerlink" title="请谈谈您对 MVC 的理解？"></a>请谈谈您对 MVC 的理解？</h2><p>MVC 是一个设计模式，它强制性的使应用程序的输入、处理和输出分开。</p><p>由模型(model),视图(view),控制器(controller) 完成的应用程序</p><p>视图是用户看到并与之交互的界面，模型表示企业数据和业务规则，控制器接受用户的输入并调用模型和视图去完成用户的需求。</p><h2 id="网站高并发，大流量访问的处理及解决方法"><a href="#网站高并发，大流量访问的处理及解决方法" class="headerlink" title="网站高并发，大流量访问的处理及解决方法"></a>网站高并发，大流量访问的处理及解决方法</h2><h3 id="网站优化："><a href="#网站优化：" class="headerlink" title="网站优化："></a>网站优化：</h3><p>代码：  代码优化，</p><h3 id="数据库的优化："><a href="#数据库的优化：" class="headerlink" title="数据库的优化："></a>数据库的优化：</h3><p>​    表结构优化；SQL优化；冷热数据的优化；nosql；分表分库</p><h3 id="文件优化："><a href="#文件优化：" class="headerlink" title="文件优化："></a>文件优化：</h3><p>文件打包压缩 ；CDN ；OSS  </p><h3 id="服务器优化："><a href="#服务器优化：" class="headerlink" title="服务器优化："></a>服务器优化：</h3><p>负载均衡；主从复制</p>]]></content>
      
      
      <categories>
          
          <category> 面试题 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> php </tag>
            
            <tag> 面试题 </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>Vue-SPA</title>
      <link href="/2018/11/29/vue-spa/"/>
      <url>/2018/11/29/vue-spa/</url>
      
        <content type="html"><![CDATA[<h1 id="SPA"><a href="#SPA" class="headerlink" title="SPA"></a>SPA</h1><h2 id="什么是SPA？"><a href="#什么是SPA？" class="headerlink" title="什么是SPA？"></a>什么是SPA？</h2><p>SPA(Single Page Application)：单页面应用程序，是一种前端的开发技术，是现在前、后端分离下的一种产物。</p><ul><li>传统的网站</li></ul><p>​    我们传统的网站是由很 <code>多个独立的页面</code> 组成的，当我们点击页面中的 a 标签时，就会向服务器发送一个新的请求，然后下载另一个页面显示，跳转时是页面之间的跳转。</p><ul><li><p>SPA</p><p>SPA（单页面应用程序），顾名思议，整个网站中<code>只有一个页面</code>，在这个页面中会加载很多个不同的组件，当我们点击按钮时，并不会打开一个新的页面，而是还在当前的页面中<code>切换显示不同的组件</code>。</p></li></ul><h2 id="SPA-的优、缺点"><a href="#SPA-的优、缺点" class="headerlink" title="SPA 的优、缺点"></a>SPA 的优、缺点</h2><ul><li>优点</li></ul><p>1、减轻服务器的压力：一个网站只有一个页面，只需要从服务器加载一次</p><p>2、并且把大量操作都放到了浏览器中去完成</p><p>3、前、后端完成分离，使服务器只需要提供同一套 JSON 数据接口，就可以同时满足WEB端、桌面端、手机端等不同的前端设备</p><p>4、而且前端只关注前端、后端只操作数据，各司其职</p><ul><li>缺点</li></ul><p>1、首屏加载速度可能会很长</p><p>2、SEO（搜索引擎优化）不友好，爬虫数据时什么也抓不到</p><p>3、页面复杂度提高、开发难度加大</p><h2 id="使用-Vue-开发-SPA"><a href="#使用-Vue-开发-SPA" class="headerlink" title="使用 Vue 开发 SPA"></a>使用 Vue 开发 SPA</h2><p>我们可以使用 Vue 框架来开发 SPA，开发时使用的技术：</p><p>1、使用 <code>Vue Cli</code> 工具快速构建项目目录结构、开发环境、部署</p><p>2、使用 <code>Vue-Router</code> 实现路由，实现组件之间的切换</p><p>3、使用 <code>Vuex</code> 实现状态数据的管理</p><p>4、使用 <code>axios</code> 发送 AJAX 和服务器通信</p><h2 id="vue-文件"><a href="#vue-文件" class="headerlink" title=".vue 文件"></a>.vue 文件</h2><p>在使用 Vue 开发 SPA 时，SPA 是由很多个 Vue 的组件组成的，每个组件就是一个 <code>.vue</code> 文件。</p><p>每个 <code>.vue</code> 文件中都由三部分组件：HTML、CSS、JS，并且：</p><p>1、html：所有的 html 代码必须要写在 <code>&lt;template&gt;...&lt;/template&gt;</code> 标签中</p><p>2、css：所有的 css 代码写在 <code>style...&lt;style&gt;</code> 标签中</p><p>3、js：所有 js 代码写在 <code>&lt;script&gt;...&lt;/script&gt;</code> 标签中</p><p>以下是一个 .vue 文件中的内容：</p><pre class=" language-vue"><code class="language-vue"><template><div>    <h1>        Hello World ! 我是 {{ tome }}    </h1>        <input type="button" @click="sayHi" value="sayHi"></div></template><style>body{    background-color: #EEE;}h1 {    font-size: 30px;}</style><script>export default {    data(){        return {            name:'tom'        }    },    methods:{        sayHi(){            alert("Hi")        }    }}</script></code></pre><h2 id="SPA-中的-Vue"><a href="#SPA-中的-Vue" class="headerlink" title="SPA 中的 Vue"></a>SPA 中的 Vue</h2><p>SPA 中的 Vue 和我们之前学习过的 Vue 的用法大体上是一致的，不过也有一些不一样的地方需要注意一下：</p><ul><li>data 必须是一个函数</li></ul><p>我们之前使用 vue 时，都是在 data 中定义数据，而 data 是一个属性类型，如：</p><pre class=" language-js"><code class="language-js"><span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">{</span>    data<span class="token punctuation">:</span><span class="token punctuation">{</span>        name<span class="token punctuation">:</span><span class="token string">'tom'</span><span class="token punctuation">,</span>        age<span class="token punctuation">:</span><span class="token number">10</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre><p>在 spa 中，每个 .vue 文件是一个 Vue 的组件，在组件中 <code>data 必须是一个函数</code>，而且不能使用 new Vue 创建新的 Vue 对象，因为整个 SPA 中只有一个 Vue 对象：</p><pre class=" language-js"><code class="language-js"><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>    <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token keyword">return</span> <span class="token punctuation">{</span>            name<span class="token punctuation">:</span><span class="token string">'tom'</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><ul><li>使用 import 引入组件</li></ul><p>我们之前当要引入一个JS文件或者组件时需要使用 script 标签，如：</p><pre><code>&lt;script src=&#39;Pagination.js&#39;&gt;&lt;/script&gt;</code></pre><p>而在 spa 中需要使用 es6 提供的 import 来引入：</p><pre class=" language-js"><code class="language-js"><span class="token keyword">import</span> Pagination <span class="token keyword">from</span> <span class="token string">"Pagination.vue"</span></code></pre><h1 id="使用-Vue-CLI-构建项目"><a href="#使用-Vue-CLI-构建项目" class="headerlink" title="使用 Vue CLI 构建项目"></a>使用 Vue CLI 构建项目</h1><p>Vue 提供了一个 <code>Vue CLI</code> 的工具可以让我们快速的搭建起一个 SPA 的项目来。</p><h2 id="官方网站"><a href="#官方网站" class="headerlink" title="官方网站"></a>官方网站</h2><p>官方文档：<a href="https://cli.vuejs.org/zh/" target="_blank" rel="noopener">https://cli.vuejs.org/zh/</a></p><p><img src="/medias/assets/image-20181117093433022-2418473.png" alt="image-20181117093433022"></p><h2 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h2><p>首先要确定自己的电脑上安装了 <code>Node.js</code> 8.9 或更高版本。</p><p>然后，我们就可以使用 npm 来安装 vue/cli ：</p><pre><code>npm install -g @vue/cli</code></pre><p>安装之后，我们可以在命令行中使用 vue 指令查看安装的版本：</p><pre><code>vue --version</code></pre><p><img src="/medias/assets/image-20181117093739940-2418659.png" alt="image-20181117093739940"></p><h2 id="创建一个项目"><a href="#创建一个项目" class="headerlink" title="创建一个项目"></a>创建一个项目</h2><p>我们可以使用下面的命令来创建一个 SPA 的项目：</p><pre><code>vue create 项目名称</code></pre><p>创建项目时，会提示我们选择项目中需要使用的组件，我们可以使用默认的配置，也可以自己手动选择需要加载的组件。</p><p>手动选择组件</p><p><img src="/medias/assets/image-20181117095607650-2419767.png" alt="image-20181117095607650"></p><p>勾选需要安装的组件：</p><p><img src="/medias/assets/image-20181117095700506-2419820.png" alt="image-20181117095700506"></p><p>使用路由的 history 模式：</p><p><img src="/medias/assets/image-20181117095724832-2419844.png" alt="image-20181117095724832"></p><p>把配置写到 package.json 文件中：</p><p><img src="/medias/assets/image-20181117095750342-2419870.png" alt="image-20181117095750342"></p><p>不保存本次的配置：</p><p><img src="/medias/assets/image-20181117095810003-2419890.png" alt="image-20181117095810003"></p><h2 id="目录介绍"><a href="#目录介绍" class="headerlink" title="目录介绍"></a>目录介绍</h2><p>我们写的代码都在 src 目录中</p><h2 id="启动项目"><a href="#启动项目" class="headerlink" title="启动项目"></a>启动项目</h2><p>安装成功之后，我们可以进行使用以下指令启动项目：</p><pre><code>cd hello-world   // 进入项目目录npm run server   // 启动项目</code></pre><p><img src="/medias/assets/image-20181117100041305-2420041.png" alt="image-20181117100041305"></p><p>启动之后我们可以在浏览器中访问欢迎页面：</p><p><img src="/medias/assets/image-20181117100106775-2420066.png" alt="image-20181117100106775"></p><h2 id="初始组件-App-vue"><a href="#初始组件-App-vue" class="headerlink" title="初始组件 App.vue"></a>初始组件 App.vue</h2><p>项目启动之后会最先运行 main.js 文件：</p><p>main.js</p><pre class=" language-js"><code class="language-js"><span class="token keyword">import</span> Vue <span class="token keyword">from</span> <span class="token string">'vue'</span><span class="token keyword">import</span> App <span class="token keyword">from</span> <span class="token string">'./App.vue'</span><span class="token keyword">import</span> router <span class="token keyword">from</span> <span class="token string">'./router'</span><span class="token keyword">import</span> store <span class="token keyword">from</span> <span class="token string">'./store'</span>Vue<span class="token punctuation">.</span>config<span class="token punctuation">.</span>productionTip <span class="token operator">=</span> <span class="token boolean">false</span><span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">{</span>  router<span class="token punctuation">,</span>                    <span class="token comment" spellcheck="true">// 装载 vue-router</span>  store<span class="token punctuation">,</span>                     <span class="token comment" spellcheck="true">// 装载 vuex</span>  render<span class="token punctuation">:</span> h <span class="token operator">=</span><span class="token operator">></span> <span class="token function">h</span><span class="token punctuation">(</span>App<span class="token punctuation">)</span>      <span class="token comment" spellcheck="true">// 渲染 App 组件</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">$mount</span><span class="token punctuation">(</span><span class="token string">'#app'</span><span class="token punctuation">)</span></code></pre><p>在 main.js 文件中会</p><p>1、引入 vue 、vue-router、vux 框架包</p><p>2、引入 App 组件</p><p>3、创建 Vue 对象并且装载 vue-router , vux</p><p>4、渲染第一个组件：App.vue</p><p>所以我们运行之后看到的页面就是 App.vue 组件的内容。 </p><h1 id="Vue-Router"><a href="#Vue-Router" class="headerlink" title="Vue-Router"></a>Vue-Router</h1><p>在 SPA 中，网站内容的变换实际上的组件的切换，为了方便的实现组件间的切换，Vue 框架引入了 <code>vue-router</code> 的个工具来实现多个组件之间的切换。</p><p>官方文档：<a href="https://router.vuejs.org/zh/" target="_blank" rel="noopener">https://router.vuejs.org/zh/</a></p><p><img src="/medias/assets/image-20181117161356170-2442436.png" alt="image-20181117161356170"></p><h2 id="配置路由"><a href="#配置路由" class="headerlink" title="配置路由"></a>配置路由</h2><p>在使用 vue-router 之前，我们需要先配置访问的路径与要显示的组件的对应关系。</p><p>我们需要在 <code>router.js</code> 文件中进行配置。</p><p><img src="/medias/assets/image-20181117161625914-2442585.png" alt="image-20181117161625914"></p><p>router.js</p><p>默认配置了两个路由:</p><p>1、当访问 / 时，显示 Home 组件</p><p>2、当访问 /about 时，显示 about 组件</p><pre class=" language-js"><code class="language-js"><span class="token keyword">import</span> Vue <span class="token keyword">from</span> <span class="token string">'vue'</span><span class="token keyword">import</span> Router <span class="token keyword">from</span> <span class="token string">'vue-router'</span><span class="token keyword">import</span> Home <span class="token keyword">from</span> <span class="token string">'./views/Home.vue'</span>   <span class="token comment" spellcheck="true">// 加载组件</span>Vue<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>Router<span class="token punctuation">)</span><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">new</span> <span class="token class-name">Router</span><span class="token punctuation">(</span><span class="token punctuation">{</span>  mode<span class="token punctuation">:</span> <span class="token string">'history'</span><span class="token punctuation">,</span>              <span class="token comment" spellcheck="true">// 路由模式，history 和 hash 两种</span>  base<span class="token punctuation">:</span> process<span class="token punctuation">.</span>env<span class="token punctuation">.</span>BASE_URL<span class="token punctuation">,</span>  routes<span class="token punctuation">:</span> <span class="token punctuation">[</span>                    <span class="token comment" spellcheck="true">// 配置路由的数组</span>    <span class="token punctuation">{</span>      path<span class="token punctuation">:</span> <span class="token string">'/'</span><span class="token punctuation">,</span>              <span class="token comment" spellcheck="true">// 访问路径</span>      name<span class="token punctuation">:</span> <span class="token string">'home'</span><span class="token punctuation">,</span>           <span class="token comment" spellcheck="true">// 路由名称</span>      component<span class="token punctuation">:</span> Home         <span class="token comment" spellcheck="true">// 对应的组件</span>    <span class="token punctuation">}</span><span class="token punctuation">,</span>    <span class="token punctuation">{</span>      path<span class="token punctuation">:</span> <span class="token string">'/about'</span><span class="token punctuation">,</span>      name<span class="token punctuation">:</span> <span class="token string">'about'</span><span class="token punctuation">,</span>      component<span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token comment" spellcheck="true">/* webpackChunkName: "about" */</span> <span class="token string">'./views/About.vue'</span><span class="token punctuation">)</span>    <span class="token punctuation">}</span>  <span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre><p>说明：</p><p>1、about 组件的写法是延迟加载：在访问 /about 路径时才会加载该组件，这样可以提高首屏显示速度</p><p>2、<code>/* webpackChunkName: &quot;about&quot; */</code> 的意思是将这个组件添加到 about 这个组中，当访问 about 这个组件时就会添加所有 about 这个组中的组件</p><h2 id="路由切换按钮"><a href="#路由切换按钮" class="headerlink" title="路由切换按钮"></a>路由切换按钮</h2><p>当我们定义好路由之后，我们就可以在页面中添加按钮跳转到相应的路由，有两种跳转方法：</p><p>1、在 HTML 中使用 <code>router-link</code> 标签（相当于a标签）</p><p>2、在 JS 中使用 <code>router-push</code> 实现跳转（相当于 location.href ）</p><h3 id="router-link-标签"><a href="#router-link-标签" class="headerlink" title="router-link 标签"></a>router-link 标签</h3><p>我们可以在页面中使用 <code>router-link</code> 标签来制作可以跳转的按钮（相当于 a 标签）：</p><pre class=" language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>nav<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-link</span> <span class="token attr-name">to</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>/<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>Home<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>router-link</span><span class="token punctuation">></span></span> |  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-link</span> <span class="token attr-name">to</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>/about<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>About<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>router-link</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></code></pre><p>说明：to 属性用来指定点击按钮时要切换到的路由</p><p><img src="/medias/assets/image-20181117175229536-2448349.png" alt="image-20181117175229536"></p><h3 id="router-push"><a href="#router-push" class="headerlink" title="router.push"></a>router.push</h3><p>在 JS 中我们可以使用 <code>this.$router.push</code> 实现跳转。</p><pre class=" language-js"><code class="language-js"><span class="token function">login</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> <span class="token string">'登录成功'</span> <span class="token punctuation">)</span>  <span class="token comment" spellcheck="true">// 跳转到 /</span>  <span class="token keyword">this</span><span class="token punctuation">.</span>$router<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">'/'</span><span class="token punctuation">)</span><span class="token punctuation">}</span></code></pre><h2 id="组件容器"><a href="#组件容器" class="headerlink" title="组件容器"></a>组件容器</h2><p>我们在使用 vue-router 时，除了要配置路由之后，最重要的是，我们还需要在页面中使用 <code>router-view</code> 标签来指定组件显示的位置：</p><pre class=" language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>app<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>nav<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-link</span> <span class="token attr-name">to</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>/<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>Home<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>router-link</span><span class="token punctuation">></span></span> |      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-link</span> <span class="token attr-name">to</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>/about<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>About<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>router-link</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>    <span class="token comment" spellcheck="true">&lt;!-- 组件显示的容器 --></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-view</span><span class="token punctuation">/></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">></span></span></code></pre><p>这时所有的路由组件都会显示在 <code>router-view</code> 标签所在的位置上：</p><p>1、默认显示路由配置中的第一个路由，也就是 / 路由</p><p>2、当切换路由时，也是在这个标签的位置上切换路由</p><p>因为我们在 <code>router.js</code> 文件的路由是这样配置的：</p><pre class=" language-js"><code class="language-js">routes<span class="token punctuation">:</span> <span class="token punctuation">[</span>                    <span class="token comment" spellcheck="true">// 配置路由的数组</span>    <span class="token punctuation">{</span>      path<span class="token punctuation">:</span> <span class="token string">'/'</span><span class="token punctuation">,</span>              <span class="token comment" spellcheck="true">// 访问路径</span>      name<span class="token punctuation">:</span> <span class="token string">'home'</span><span class="token punctuation">,</span>           <span class="token comment" spellcheck="true">// 路由名称</span>      component<span class="token punctuation">:</span> Home         <span class="token comment" spellcheck="true">// 对应的组件</span>    <span class="token punctuation">}</span><span class="token punctuation">,</span>    <span class="token punctuation">{</span>      path<span class="token punctuation">:</span> <span class="token string">'/about'</span><span class="token punctuation">,</span>      name<span class="token punctuation">:</span> <span class="token string">'about'</span><span class="token punctuation">,</span>      component<span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token comment" spellcheck="true">/* webpackChunkName: "about" */</span> <span class="token string">'./views/About.vue'</span><span class="token punctuation">)</span>    <span class="token punctuation">}</span><span class="token punctuation">]</span></code></pre><p>第一个是 home 路由，所以默认显示的就是 Home 组件的内容：</p><p><img src="/medias/assets/image-20181117180842895-2449322.png" alt="image-20181117180842895"></p><h2 id="案例：添加一个页面"><a href="#案例：添加一个页面" class="headerlink" title="案例：添加一个页面"></a>案例：添加一个页面</h2><p>1、首先在 <code>views</code> 目录下创建 <code>Hello.vue</code> 组件</p><p>views/Hello.vue</p><pre class=" language-vue"><code class="language-vue"><template>    <div>        <input @click="sayHello" type="button" value="sayHello">    </div></template><style>body {    background-color: #eee;}</style><script>export default {    methods:{        sayHello(){            alert('Hello ~')        }    }}</script></code></pre><p>注意：HTML的代码必须要写在一个根标签中。</p><p>2、配置路由</p><p>在 <code>router.js</code> 文件中的 routes 数组中添加一个 hello 路由</p><p>router.js</p><pre class=" language-js"><code class="language-js">routes<span class="token punctuation">:</span> <span class="token punctuation">[</span>    <span class="token operator">...</span>    <span class="token punctuation">{</span>      path<span class="token punctuation">:</span> <span class="token string">'/hello'</span><span class="token punctuation">,</span>   <span class="token comment" spellcheck="true">// 路径</span>      name<span class="token punctuation">:</span> <span class="token string">'hello'</span><span class="token punctuation">,</span>    <span class="token comment" spellcheck="true">// 名称</span>      component<span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'./views/Hello.vue'</span><span class="token punctuation">)</span>    <span class="token comment" spellcheck="true">// 加载的组件</span>    <span class="token punctuation">}</span><span class="token punctuation">]</span></code></pre><p>3、添加切换按钮</p><p>在 <code>App.vue</code> 页面中添加跳转到 /hello 的按钮</p><p>App.vue</p><pre class=" language-vue"><code class="language-vue"><div id="nav">  <router-link to="/">Home</router-link> |  <router-link to="/about">About</router-link> |  <router-link to="/hello">hello</router-link></div></code></pre><p>添加之后保存，保存之后页面会自动刷新：</p><p><img src="/medias/assets/image-20181117181622305-2449782.png" alt="image-20181117181622305"></p><p>点击 hello 按钮，就会在 router-view 标签的位置上切换到 Hello 组件：</p><p><img src="/medias/assets/image-20181117181732185-2449852.png" alt="image-20181117181732185"></p><h2 id="页面组件与功能组件"><a href="#页面组件与功能组件" class="headerlink" title="页面组件与功能组件"></a>页面组件与功能组件</h2><p>组件分为两种：<code>页面组件</code> 和 <code>功能组件</code>。</p><ul><li>页面组件</li></ul><p>用来构建独立页面的组件，保存在 <code>views</code>  目录中，页面组件中可以包含多个功能组件。</p><ul><li>功能组件</li></ul><p>我们可以将页面中一些独立的小功能制作成组件，这些组件可以被页面组件引入使用，比如：翻页、时间插件等，功能组件保存在  <code>components</code>  目录中，这些组件不能独立显示，只能被包含在一个页面组件中使用。</p><p>页面组件和功能组件的关系：（每个页面就是一个页面组件，每个页面中可以包含多个功能组件）</p><p><img src="/medias/assets/image-20181117191120753-2453080.png" alt="image-20181117191120753"></p><h2 id="使用功能组件"><a href="#使用功能组件" class="headerlink" title="使用功能组件"></a>使用功能组件</h2><p>系统中默认有一个 <code>HelloWorld</code> 组件：</p><p><img src="/medias/assets/image-20181117190241610-2452561.png" alt="image-20181117190241610"></p><p>如果要在页面中使用这个组件需要先使用 <code>import</code> 引入该组件，然后在使用标签使用该组件。</p><p>修改 <code>Hello.vue</code> 页面：</p><p>views/Hello.vue</p><p><img src="/medias/assets/image-20181117190813376-2452893.png" alt="image-20181117190813376"></p><p>效果：</p><p><img src="/medias/assets/image-20181117190856751-2452936.png" alt="image-20181117190856751"></p><h2 id="路由参数"><a href="#路由参数" class="headerlink" title="路由参数"></a>路由参数</h2><p>我们在定义路由时经常需要为路由添加一些参数，比如当点击一件商品进入商品详情页时需要把商品的ID传到页面中。</p><p>我们可以使用以下语法定义带参数的路由：</p><pre class=" language-js"><code class="language-js"><span class="token punctuation">{</span>  path<span class="token punctuation">:</span> <span class="token string">'/hello/:id'</span><span class="token punctuation">,</span>  name<span class="token punctuation">:</span> <span class="token string">'hello'</span><span class="token punctuation">,</span>  component<span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'./views/Hello.vue'</span><span class="token punctuation">)</span><span class="token punctuation">}</span></code></pre><p>这时当我们访问 <code>/hello/1</code>  ,  <code>/hello/tom</code>   等路径时都会匹配 Hello 组件。</p><p>如果我们希望只匹配数字做为参数，这时可以使用正则表达式来限制匹配的类型：</p><p>id 参数必须是数字：</p><pre class=" language-js"><code class="language-js"><span class="token punctuation">{</span>  path<span class="token punctuation">:</span> <span class="token string">'/hello/:id(\\d+)'</span><span class="token punctuation">,</span>  name<span class="token punctuation">:</span> <span class="token string">'hello'</span><span class="token punctuation">,</span>  component<span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'./views/Hello.vue'</span><span class="token punctuation">)</span><span class="token punctuation">}</span></code></pre><p>在组件中可以使用 <code>this.$router.params</code> 来接收传过来的所有的参数。</p><p>比如在 Hello.vue 组件中可以这样接收 id 这个参数：</p><pre class=" language-js"><code class="language-js"><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>    <span class="token operator">...</span>    <span class="token function">created</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">// 打印接收的 id 参数</span>        <span class="token function">alert</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>$route<span class="token punctuation">.</span>params<span class="token punctuation">.</span>id<span class="token punctuation">)</span>    <span class="token punctuation">}</span>    <span class="token operator">...</span><span class="token punctuation">}</span></code></pre><h2 id="meta-数据"><a href="#meta-数据" class="headerlink" title="meta 数据"></a>meta 数据</h2><p>我们在定义路由时，有时我们可能还需要设置一些与这个路由相关的额外的数据，这时我们不可以通过 <code>meta</code> 属性来定义。</p><p>比如，我们可以通过 meta 为每个路由对应的页面设置页面标题：</p><p>store.js</p><pre class=" language-js"><code class="language-js">routes<span class="token punctuation">:</span> <span class="token punctuation">[</span>    <span class="token punctuation">{</span>      path<span class="token punctuation">:</span> <span class="token string">'/'</span><span class="token punctuation">,</span>      name<span class="token punctuation">:</span> <span class="token string">'home'</span><span class="token punctuation">,</span>      component<span class="token punctuation">:</span> Home<span class="token punctuation">,</span>      meta<span class="token punctuation">:</span><span class="token punctuation">{</span>        title<span class="token punctuation">:</span> <span class="token string">'首页'</span>      <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">,</span>    <span class="token punctuation">{</span>      path<span class="token punctuation">:</span> <span class="token string">'/about'</span><span class="token punctuation">,</span>      name<span class="token punctuation">:</span> <span class="token string">'about'</span><span class="token punctuation">,</span>      meta<span class="token punctuation">:</span> <span class="token punctuation">{</span>        title<span class="token punctuation">:</span><span class="token string">'关于我们'</span>      <span class="token punctuation">}</span><span class="token punctuation">,</span>      component<span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'./views/About.vue'</span><span class="token punctuation">)</span>    <span class="token punctuation">}</span><span class="token punctuation">,</span>    <span class="token punctuation">{</span>      path<span class="token punctuation">:</span> <span class="token string">'/hello/:id(\\d+)'</span><span class="token punctuation">,</span>      name<span class="token punctuation">:</span> <span class="token string">'hello'</span><span class="token punctuation">,</span>      meta<span class="token punctuation">:</span> <span class="token punctuation">{</span>        title<span class="token punctuation">:</span><span class="token string">'hello'</span>      <span class="token punctuation">}</span><span class="token punctuation">,</span>      component<span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'./views/Hello.vue'</span><span class="token punctuation">)</span>    <span class="token punctuation">}</span><span class="token punctuation">]</span></code></pre><p>设置了 meta 数据之后，在每个组件中，我们就可以通过 <code>this.$route.meta</code> 来获取对应的 meta 数据。</p><p>在 Hello.vue、About.vue、Home.vue 中都添加初始设置 title 的代码：</p><pre class=" language-js"><code class="language-js"><span class="token function">created</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    document<span class="token punctuation">.</span>title <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$route<span class="token punctuation">.</span>meta<span class="token punctuation">.</span>title<span class="token punctuation">}</span><span class="token punctuation">,</span></code></pre><p>效果是在显示每个页面时都会用 meta 中设置的 title 来初始化页面标题：</p><p><img src="/medias/assets/image-20181118104002573-2508802.png" alt="image-20181118104002573"></p><h2 id="导航守卫"><a href="#导航守卫" class="headerlink" title="导航守卫"></a>导航守卫</h2><p>导航守卫：指在每次路由将要发生变化时，都会被触发的一套钩子函数。</p><p>每当点击一个按钮或者在JS 中调用 this.$route.push 实现页面跳转时，首先要先执行导航守卫定义的函数，当函数中再次调用 next 函数时才可以跳转，否则不可以跳转：</p><p><img src="/medias/assets/image-20181118104639964-2509200.png" alt="image-20181118104639964"></p><p>我们可创建 VueRouter 时使用 <code>beforeEach</code> 定义全局守卫：</p><pre class=" language-js"><code class="language-js"><span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">VueRouter</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token operator">...</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true">// 为路由绑定一个每次跳转时触发的函数</span>router<span class="token punctuation">.</span><span class="token function">beforeEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span>to<span class="token punctuation">,</span> <span class="token keyword">from</span><span class="token punctuation">,</span> next<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>  <span class="token comment" spellcheck="true">// ...</span><span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre><p>全局守卫需要三个参数：</p><p>to：即将要进入的 <code>router 对象</code>（比如：从 Index.vue 跳转到 Home.vue ，to 指的就是 Home.vue）</p><p>from：当前正在离开的 <code>router 对象</code>（比如：从 Index.vue 跳转到 Home.vue ，to 指的就是 Index.vue）</p><p>next：是一个<code>函数</code>，在守卫中的最后必须要调用这个函数，调用时分为以下几个情况：</p><ul><li>next()：通过，进入下一个环节</li><li>next(false)：中断当前的导航（不允许跳转）。</li><li>next(‘/‘)：跳转到一个指定的地址（这里是 / ，也可以是其它路径）。</li></ul><p>我们是在 main.js 文件中引入的 router ,所以，我们可以在 main.js 中定义全局守卫：</p><p>main.js</p><pre class=" language-js"><code class="language-js"><span class="token keyword">import</span> Vue <span class="token keyword">from</span> <span class="token string">'vue'</span><span class="token keyword">import</span> App <span class="token keyword">from</span> <span class="token string">'./App.vue'</span><span class="token keyword">import</span> router <span class="token keyword">from</span> <span class="token string">'./router'</span><span class="token keyword">import</span> store <span class="token keyword">from</span> <span class="token string">'./store'</span>router<span class="token punctuation">.</span><span class="token function">beforeEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span>to<span class="token punctuation">,</span> <span class="token keyword">from</span><span class="token punctuation">,</span> next<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>  <span class="token comment" spellcheck="true">// ...</span><span class="token punctuation">}</span><span class="token punctuation">)</span>Vue<span class="token punctuation">.</span>config<span class="token punctuation">.</span>productionTip <span class="token operator">=</span> <span class="token boolean">false</span><span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">{</span>  router<span class="token punctuation">,</span>  store<span class="token punctuation">,</span>  render<span class="token punctuation">:</span> h <span class="token operator">=</span><span class="token operator">></span> <span class="token function">h</span><span class="token punctuation">(</span>App<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">$mount</span><span class="token punctuation">(</span><span class="token string">'#app'</span><span class="token punctuation">)</span></code></pre><p>全局守卫在项目中应用非常广泛，比如，有些页面是必须登录才可以访问的，我们就可以使用全局守卫来实现。</p><h2 id="示例：登录的验证"><a href="#示例：登录的验证" class="headerlink" title="示例：登录的验证"></a>示例：登录的验证</h2><p>1、在定义路由时使用 meta 来设置一个路由是否必须登录才能访问</p><p>router.js  中定义在 meta 中添加 isLogin ，表示必须登录才能访问</p><pre class=" language-js"><code class="language-js"><span class="token punctuation">{</span>  path<span class="token punctuation">:</span> <span class="token string">'/about'</span><span class="token punctuation">,</span>  name<span class="token punctuation">:</span> <span class="token string">'about'</span><span class="token punctuation">,</span>  meta<span class="token punctuation">:</span> <span class="token punctuation">{</span>    title<span class="token punctuation">:</span><span class="token string">'关于我们'</span><span class="token punctuation">,</span>    isLogin<span class="token punctuation">:</span> <span class="token boolean">true</span>  <span class="token punctuation">}</span><span class="token punctuation">,</span>  component<span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'./views/About.vue'</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">,</span></code></pre><p>2、定义全局守卫</p><p>main.js 中添加全局守卫：</p><pre class=" language-js"><code class="language-js"><span class="token keyword">import</span> Vue <span class="token keyword">from</span> <span class="token string">'vue'</span><span class="token keyword">import</span> App <span class="token keyword">from</span> <span class="token string">'./App.vue'</span><span class="token keyword">import</span> router <span class="token keyword">from</span> <span class="token string">'./router'</span><span class="token keyword">import</span> store <span class="token keyword">from</span> <span class="token string">'./store'</span>router<span class="token punctuation">.</span><span class="token function">beforeEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span>to<span class="token punctuation">,</span> <span class="token keyword">from</span><span class="token punctuation">,</span> next<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>  <span class="token comment" spellcheck="true">// 如果将要进入的跳转必须登录，那么就先判断用户有没有登录</span>  <span class="token keyword">if</span><span class="token punctuation">(</span>to<span class="token punctuation">.</span>meta<span class="token punctuation">.</span>isLogin<span class="token punctuation">)</span>  <span class="token punctuation">{</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>localStorage<span class="token punctuation">.</span><span class="token function">getItem</span><span class="token punctuation">(</span><span class="token string">'token'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>      <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token keyword">else</span>      <span class="token function">next</span><span class="token punctuation">(</span><span class="token string">'/'</span><span class="token punctuation">)</span>  <span class="token punctuation">}</span>  <span class="token keyword">else</span>  <span class="token punctuation">{</span>    <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre><h2 id="嵌套路由"><a href="#嵌套路由" class="headerlink" title="嵌套路由"></a>嵌套路由</h2><p>有时一个页面中可能还会嵌套子页面，比如在 hello 页面中，可能还会有 hello tom  和 hello jack 两个子页面，这时我们就可以通过在定义路由时使用 <code>children</code> 数组来定义嵌套路由。</p><p>router.js</p><pre class=" language-js"><code class="language-js"><span class="token punctuation">{</span>  path<span class="token punctuation">:</span> <span class="token string">'/hello'</span><span class="token punctuation">,</span>  name<span class="token punctuation">:</span> <span class="token string">'hello'</span><span class="token punctuation">,</span>  meta<span class="token punctuation">:</span> <span class="token punctuation">{</span>    title<span class="token punctuation">:</span><span class="token string">'hello'</span>  <span class="token punctuation">}</span><span class="token punctuation">,</span>  component<span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'./views/Hello.vue'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>  children<span class="token punctuation">:</span> <span class="token punctuation">[</span>    <span class="token comment" spellcheck="true">// /hello/tom</span>    <span class="token punctuation">{</span>      path<span class="token punctuation">:</span> <span class="token string">"tom"</span><span class="token punctuation">,</span>      name<span class="token punctuation">:</span> <span class="token string">"hello-tom"</span><span class="token punctuation">,</span>      component<span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'./views/HelloTom.vue'</span><span class="token punctuation">)</span>    <span class="token punctuation">}</span><span class="token punctuation">,</span>    <span class="token comment" spellcheck="true">// /hello/jack</span>    <span class="token punctuation">{</span>      path<span class="token punctuation">:</span> <span class="token string">"jack"</span><span class="token punctuation">,</span>      name<span class="token punctuation">:</span> <span class="token string">"hello-jack"</span><span class="token punctuation">,</span>      component<span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'./views/HelloJack.vue'</span><span class="token punctuation">)</span>    <span class="token punctuation">}</span>  <span class="token punctuation">]</span><span class="token punctuation">}</span></code></pre><p>然后在 Hello.vue 页在中再添加两个按钮和一个 router-view 设置子页面的位置：</p><p>views/Hello.vue</p><pre class=" language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-link</span> <span class="token attr-name">to</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>/hello/tom<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>Hello Tom<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>router-link</span><span class="token punctuation">></span></span> |<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-link</span> <span class="token attr-name">to</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>/hello/jack<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>Hello Jac<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>router-link</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>hr</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-view</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>router-view</span><span class="token punctuation">></span></span></code></pre><p>效果：当点击 Hello Tom 和 Hello Jack 按钮时，会切换嵌套组件</p><p><img src="/medias/assets/image-20181118115827326-2513507.png" alt="image-20181118115827326"></p><p>嵌套组件关系图：</p><p><img src="/medias/assets/image-20181118120205288-2513725.png" alt="image-20181118120205288"></p><p>#Vuex</p><h2 id="什么是-Vuex？"><a href="#什么是-Vuex？" class="headerlink" title="什么是 Vuex？"></a>什么是 Vuex？</h2><p>Vuex 是一个专为 Vue.js 应用程序开发的<strong>状态管理模式</strong>。</p><p>Vue 是由数据驱动的，也就是说每个组件的状态都是由数据决定的，比如一个元素的显示与隐藏就是它的两种状态，这两种状态在 vue 中都会由一个数据来管理。</p><p>比如，下面的 img 标签的显示与隐藏由 isShow 这个数据决定，当 isShow 为 true 时显示，为 false 时隐藏：</p><pre><code>&lt;template&gt;    &lt;div&gt;        &lt;img v-if=&quot;isShow&quot; src=&quot;../assets/logo.png&quot;&gt;    &lt;/div&gt;&lt;/template&gt;&lt;script&gt;export default {  data(){    return {      isShow: true    }  },  ...}&lt;/script&gt;</code></pre><p>也就是说现在这个元素的状态由 isShow 这个数据来决定。</p><p>在实际工作中，我们有时会遇到这样一种情况：我们需要在一个组件中操作另一个组件中元素的状态，比如我们需要在 b.vue 这个组件中设置 a.vue 中元素的显示状态，但 vue 是不允许跨文件操作数据的：</p><p><img src="/medias/assets/image-20181118121712159-2514632.png" alt="image-20181118121712159"></p><p>这时，我们就可以把需要同时被多个组件操作的数据提取出来，由 <code>状态管理器</code> 统一进行管理，在这种模式下，所以的组件都可以操作由 <code>状态管理器</code> 统一管理的数据：</p><p><img src="/medias/assets/image-20181118122039549-2514839.png" alt="image-20181118122039549"></p><p>有了状态管理器，我们就可以在所有组件中管理 a.vue 中图片的显示状态。</p><p>总结：Vuex（状态管理器），就是可以把需要多个组件同时管理的数据管理起来，让所有组件可以共同操作以改变一个组件的状态 。</p><h2 id="使用-Vuex"><a href="#使用-Vuex" class="headerlink" title="使用 Vuex"></a>使用 Vuex</h2><h3 id="定义状态数据与方法"><a href="#定义状态数据与方法" class="headerlink" title="定义状态数据与方法"></a>定义状态数据与方法</h3><p>在使用 Vux 时，首先我们需要先定义状态数据和操作它的方法。 </p><p>使用 Vuex 时，最重要的两部分是：<code>state</code> 和 <code>mutation</code>。</p><ul><li><p>state：保存所有组件公共的数据。（数据部分）</p></li><li><p>mutation：保存操作公共数据的方法。（函数部分）</p></li></ul><p>在最开始构建项目时，如果在安装时勾选了 vuex 组件，那么就已经安装好了 vuex。</p><p>在 <code>store.js</code> 文件中定义 <code>state</code> 和 <code>mutation</code> ：</p><p><img src="/medias/assets/image-20181118122531875-2515131.png" alt="image-20181118122531875"></p><p>在 <code>store.js</code> 文件中定义 state（数据）和mutations（操作数据的函数）：</p><pre class=" language-js"><code class="language-js"><span class="token keyword">import</span> Vue <span class="token keyword">from</span> <span class="token string">'vue'</span><span class="token keyword">import</span> Vuex <span class="token keyword">from</span> <span class="token string">'vuex'</span>Vue<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>Vuex<span class="token punctuation">)</span><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">new</span> <span class="token class-name">Vuex<span class="token punctuation">.</span>Store</span><span class="token punctuation">(</span><span class="token punctuation">{</span>  state<span class="token punctuation">:</span> <span class="token punctuation">{</span>        isShow<span class="token punctuation">:</span> <span class="token boolean">false</span>  <span class="token punctuation">}</span><span class="token punctuation">,</span>  mutations<span class="token punctuation">:</span> <span class="token punctuation">{</span>      <span class="token function">changeShow</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>          <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>isShow <span class="token operator">=</span> <span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>isShow      <span class="token punctuation">}</span>  <span class="token punctuation">}</span><span class="token punctuation">,</span>  actions<span class="token punctuation">:</span> <span class="token punctuation">{</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre><h3 id="使用状态数据"><a href="#使用状态数据" class="headerlink" title="使用状态数据"></a>使用状态数据</h3><p>在 store.js 文件中定义好状态数据之后，我们就可以在页面中使用 <code>$store.state.状态数据名称</code> 来读取状态数据的值了：</p><p>views/Home.vue</p><pre class=" language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>home<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>$store.state.isShow<span class="token punctuation">"</span></span> <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>Vue logo<span class="token punctuation">"</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>../assets/logo.png<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>HelloWorld</span> <span class="token attr-name">msg</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>Welcome to Your Vue.js App<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">></span></span></code></pre><h3 id="调用mutation"><a href="#调用mutation" class="headerlink" title="调用mutation"></a>调用mutation</h3><p>当我们要修改状态数据时，我们可以使用 <code>this.$store.commit(&#39;方法名&#39;)</code> 来调用状态函数来修改状态数据：</p><p>views/Home.vue</p><pre class=" language-js"><code class="language-js"><span class="token operator">&lt;</span>script<span class="token operator">></span><span class="token operator">...</span><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span><span class="token operator">...</span>  <span class="token function">created</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token operator">...</span>    <span class="token comment" spellcheck="true">// 每5秒改变一次状态</span>    <span class="token function">setInterval</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=</span><span class="token operator">></span><span class="token punctuation">{</span>      <span class="token keyword">this</span><span class="token punctuation">.</span>$store<span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token string">'changeShow'</span><span class="token punctuation">)</span>    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">5000</span><span class="token punctuation">)</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span></code></pre><h2 id="案例：登录、退出"><a href="#案例：登录、退出" class="headerlink" title="案例：登录、退出"></a>案例：登录、退出</h2><p>store.js 中定义登录、退出按钮的状态：</p><pre class=" language-js"><code class="language-js"><span class="token keyword">import</span> Vue <span class="token keyword">from</span> <span class="token string">'vue'</span><span class="token keyword">import</span> Vuex <span class="token keyword">from</span> <span class="token string">'vuex'</span>Vue<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>Vuex<span class="token punctuation">)</span><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">new</span> <span class="token class-name">Vuex<span class="token punctuation">.</span>Store</span><span class="token punctuation">(</span><span class="token punctuation">{</span>  <span class="token comment" spellcheck="true">// 要管理的公共的数据（数据）</span>  state<span class="token punctuation">:</span> <span class="token punctuation">{</span>    isShow<span class="token punctuation">:</span><span class="token boolean">true</span><span class="token punctuation">,</span>    isLogin<span class="token punctuation">:</span> <span class="token boolean">false</span>  <span class="token punctuation">}</span><span class="token punctuation">,</span>  <span class="token comment" spellcheck="true">// 定义修改这个数据的方法（方法）</span>  mutations<span class="token punctuation">:</span> <span class="token punctuation">{</span>    <span class="token function">changeShow</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>      <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>isShow <span class="token operator">=</span> <span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>isShow    <span class="token punctuation">}</span><span class="token punctuation">,</span>    <span class="token comment" spellcheck="true">// 如果要设置参数，第一个参数必须是 state ，代表 state 对象</span>    <span class="token comment" spellcheck="true">//              第二个参数才是我们自定义的参数</span>    <span class="token function">setLogin</span><span class="token punctuation">(</span>state<span class="token punctuation">,</span> value<span class="token punctuation">)</span><span class="token punctuation">{</span>      state<span class="token punctuation">.</span>isLogin <span class="token operator">=</span> value    <span class="token punctuation">}</span>  <span class="token punctuation">}</span><span class="token punctuation">,</span>  actions<span class="token punctuation">:</span> <span class="token punctuation">{</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre><p>App.vue 中根据 isLogin 显示按钮：</p><pre class=" language-vue"><code class="language-vue"><template>  <div id="app">    <div id="nav">      <router-link to="/">Home</router-link> |      <router-link to="/about">About</router-link> |      <router-link to="/hello">Hello</router-link> |      <router-link to="/goods/23">商品页</router-link> |      <template v-if="$store.state.isLogin">        <input @click="logout" type="button" value="退出">      </template>      <template v-else>        <router-link to="/login">登录</router-link> |      </template>    </div>    <router-view/>  </div></template><script>export default {  created(){    if(localStorage.getItem('token'))      this.$store.commit('setLogin', true)  },  methods:{    logout(){      localStorage.removeItem('token')      this.$store.commit('setLogin', false)      console.log(   this.$store.state.isLogin )    }  }}</script><style>#app {  font-family: 'Avenir', Helvetica, Arial, sans-serif;  -webkit-font-smoothing: antialiased;  -moz-osx-font-smoothing: grayscale;  text-align: center;  color: #2c3e50;}#nav {  padding: 30px;}#nav a {  font-weight: bold;  color: #2c3e50;}#nav a.router-link-exact-active {  color: #42b983;}</style></code></pre><p>Login.vue 在登录成功时修改 isLogin 的值</p><pre class=" language-vue"><code class="language-vue"><template>    <div>        <input type="text" v-model="username">        <input type="password" v-model="password">        <input @click="login" type="button" value="登录">    </div></template><script>export default {    data(){        return {            username:'',            password:''        }    },    methods:{        login(){            if(this.username = 'abc' && this.password == 'abc')            {                localStorage.setItem('token', 'afdsa324#!#REfds~~')                // 修改登录状态                this.$store.commit('setLogin', true)                // 跳转到首页                this.$router.push('/')            }        }    }}</script></code></pre><p>效果：登录、退出时按钮状态发生变化：</p><p><img src="/medias/assets/image-20181119120150414-2600110.png" alt="image-20181119120150414"></p><h1 id="vue-axios"><a href="#vue-axios" class="headerlink" title="vue-axios"></a>vue-axios</h1><p>官方推荐我们在 vue 中使用 axios 发送 AJAX 的请求。</p><p>在开发 SPA 时，我们需要把 axios 集成进来，我们可以使用 <code>vue-axios</code> 这个包。</p><p>文档地址：<a href="https://www.npmjs.com/package/vue-axios" target="_blank" rel="noopener">https://www.npmjs.com/package/vue-axios</a></p><p><img src="/medias/assets/image-20181118123652167-2515812.png" alt="image-20181118123652167"></p><h2 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h2><p>使用的方法非常的简单：</p><p>1、先安装</p><pre><code>npm install --save axios vue-axios</code></pre><p>2、引入</p><p>安装之后需要修改 <code>main.js</code> ，在文件中引入并使用 axios 包：</p><p>main.js</p><pre class=" language-js"><code class="language-js"><span class="token keyword">import</span> Vue <span class="token keyword">from</span> <span class="token string">'vue'</span><span class="token keyword">import</span> App <span class="token keyword">from</span> <span class="token string">'./App.vue'</span><span class="token keyword">import</span> router <span class="token keyword">from</span> <span class="token string">'./router'</span><span class="token keyword">import</span> store <span class="token keyword">from</span> <span class="token string">'./store'</span><span class="token keyword">import</span> axios <span class="token keyword">from</span> <span class="token string">'axios'</span><span class="token keyword">import</span> VueAxios <span class="token keyword">from</span> <span class="token string">'vue-axios'</span>Vue<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>VueAxios<span class="token punctuation">,</span> axios<span class="token punctuation">)</span></code></pre><p>3、使用</p><p>引入了之后，我们就可以在项目中使用以下三种方法来使用 axios 了：</p><pre class=" language-js"><code class="language-js">Vue<span class="token punctuation">.</span>axios<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span>api<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span>response<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>response<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token keyword">this</span><span class="token punctuation">.</span>axios<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span>api<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span>response<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>response<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token keyword">this</span><span class="token punctuation">.</span>$http<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span>api<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span>response<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>response<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre><h2 id="案例：通过-axios-请求-easy-mock"><a href="#案例：通过-axios-请求-easy-mock" class="headerlink" title="案例：通过 axios 请求 easy-mock"></a>案例：通过 axios 请求 easy-mock</h2><p>easy-mock 是一个第三方数据模拟平台，我们可以在该平台上编写接口、模拟数据，然后在项目中使用 axios 请求接口获取数据。</p><p>1、注册、登录 easy-mock 并添加一个新的项目</p><p><img src="/medias/assets/image-20181118124107279-2516067.png" alt="image-20181118124107279"></p><p>输入项目名称和基础地址：</p><p><img src="/medias/assets/image-20181118124340180-2516220.png" alt="image-20181118124340180"></p><p>添加成功之后，点击进入该项目：</p><p><img src="/medias/assets/image-20181118124411837-2516251.png" alt="image-20181118124411837"></p><p>2、创建接口</p><p><img src="/medias/assets/image-20181118124446480-2516286.png" alt="image-20181118124446480"></p><p>输入模拟数据的语法：</p><p><img src="/medias/assets/image-20181118125035410-2516635.png" alt="image-20181118125035410"></p><p>3、在 main.js 中设置接口基地址</p><p>main.js</p><pre class=" language-js"><code class="language-js"><span class="token keyword">import</span> Vue <span class="token keyword">from</span> <span class="token string">'vue'</span><span class="token keyword">import</span> App <span class="token keyword">from</span> <span class="token string">'./App.vue'</span><span class="token keyword">import</span> router <span class="token keyword">from</span> <span class="token string">'./router'</span><span class="token keyword">import</span> store <span class="token keyword">from</span> <span class="token string">'./store'</span><span class="token keyword">import</span> axios <span class="token keyword">from</span> <span class="token string">'axios'</span><span class="token keyword">import</span> VueAxios <span class="token keyword">from</span> <span class="token string">'vue-axios'</span>Vue<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>VueAxios<span class="token punctuation">,</span> axios<span class="token punctuation">)</span>Vue<span class="token punctuation">.</span>axios<span class="token punctuation">.</span>defaults<span class="token punctuation">.</span>baseURL <span class="token operator">=</span> <span class="token string">'https://www.easy-mock.com/mock/5bf0edf4643497494c87d25d/api/v1'</span><span class="token punctuation">;</span>Vue<span class="token punctuation">.</span>axios<span class="token punctuation">.</span>defaults<span class="token punctuation">.</span>headers<span class="token punctuation">.</span>post<span class="token punctuation">[</span><span class="token string">'Content-Type'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'application/x-www-form-urlencoded'</span><span class="token punctuation">;</span></code></pre><p>4、在 Home.vue 中显示数据</p><p>Home.vue</p><p>在初始化时执行 AJAX 获取数据：</p><pre class=" language-js"><code class="language-js"><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>  <span class="token operator">...</span>  <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">return</span> <span class="token punctuation">{</span>      goods<span class="token punctuation">:</span><span class="token punctuation">[</span><span class="token punctuation">]</span>    <span class="token punctuation">}</span>  <span class="token punctuation">}</span><span class="token punctuation">,</span>  <span class="token function">created</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>axios<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span><span class="token string">'/goods'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>      <span class="token keyword">this</span><span class="token punctuation">.</span>goods <span class="token operator">=</span> res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>data    <span class="token punctuation">}</span><span class="token punctuation">)</span>    <span class="token operator">...</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><p>将数据绑定到页面：</p><pre class=" language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span> <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>(v,k) in goods<span class="token punctuation">"</span></span> <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>k<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    {{v.goods_name}} ￥ {{v.price}} <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>hr</span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">></span></span></code></pre><p>效果：</p><p><img src="/medias/assets/image-20181118125807214-2517087.png" alt="image-20181118125807214"></p>]]></content>
      
      
      <categories>
          
          <category> 前端 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Vue </tag>
            
        </tags>
      
    </entry>
    
  
  
</search>
